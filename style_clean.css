/* ===============================
   TOKENS
================================ */

:root {
	--color-bg: hsl(0, 0%, 97%);
	--color-fg: hsl(0, 2%, 10%);
	--primary: hsl(240, 100%, 50%);
	--primary-hover: hsl(240, 84%, 38%);
	--orange: hsl(15, 100%, 50%);

	--border-color: hsl(0, 0%, 72%);
	--border-color__dark: hsl(0, 1%, 14%);
	--border-thin: 1px;
	--border-thick: var(--border-thin);

	--font-weight-thin: 100;
	--font-weight-extra-light: 200;
	--font-weight-light: 300;
	--font-weight-regular: 400;
	--font-weight-medium: 500;
	--font-weight-semi-bold: 600;
	--font-weight-bold: 700;
	--font-weight-extra-bold: 800;
	--font-weight-black: 900;

	--font-family-base: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
		"Segoe UI", sans-serif;
	--font-size-base: var(--fluid-space-s); /* 18px */
	--font-features-alt-digits: "cv01" 1, "cv02" 1, "cv03" 1, "cv04" 1, "cv09" 1,
		"zero" 1;

	/* ==========================
	   FLUID SPACING (UTOPIA)
	   opt-in, rarely used
	========================== */

	--fluid-space-3xs: clamp(0.25rem, 0.2244rem + 0.1136vw, 0.3125rem);
	--fluid-space-2xs: clamp(0.5rem, 0.4744rem + 0.1136vw, 0.5625rem);
	--fluid-space-xs: clamp(0.75rem, 0.6989rem + 0.2273vw, 0.875rem);
	--fluid-space-s: clamp(1rem, 0.9489rem + 0.2273vw, 1.125rem);
	--fluid-space-m: clamp(1.5rem, 1.4233rem + 0.3409vw, 1.6875rem);
	--fluid-space-l: clamp(2rem, 1.8977rem + 0.4545vw, 2.25rem);
	--fluid-space-xl: clamp(3rem, 2.8466rem + 0.6818vw, 3.375rem);
	--fluid-space-2xl: clamp(4rem, 3.7955rem + 0.9091vw, 4.5rem);
	--fluid-space-3xl: clamp(6rem, 5.6932rem + 1.3636vw, 6.75rem);
	--fluid-space-4xl: clamp(7rem, 6.642rem + 1.5909vw, 7.875rem);
	--fluid-space-5xl: clamp(8rem, 7.5909rem + 1.8182vw, 9rem);
	--fluid-space-6xl: clamp(9rem, 8.5398rem + 2.0455vw, 10.125rem);

	/* One-up pairs */
	--fluid-space-3xs-2xs: clamp(0.25rem, 0.1222rem + 0.5682vw, 0.5625rem);
	--fluid-space-2xs-xs: clamp(0.5rem, 0.3466rem + 0.6818vw, 0.875rem);
	--fluid-space-xs-s: clamp(0.75rem, 0.5966rem + 0.6818vw, 1.125rem);
	--fluid-space-s-m: clamp(1rem, 0.7188rem + 1.25vw, 1.6875rem);
	--fluid-space-m-l: clamp(1.5rem, 1.1932rem + 1.3636vw, 2.25rem);
	--fluid-space-l-xl: clamp(2rem, 1.4375rem + 2.5vw, 3.375rem);
	--fluid-space-xl-2xl: clamp(3rem, 2.3864rem + 2.7273vw, 4.5rem);
	--fluid-space-2xl-3xl: clamp(4rem, 2.875rem + 5vw, 6.75rem);
	--fluid-space-3xl-4xl: clamp(6rem, 5.233rem + 3.4091vw, 7.875rem);
	--fluid-space-4xl-5xl: clamp(7rem, 6.1818rem + 3.6364vw, 9rem);
	--fluid-space-5xl-6xl: clamp(8rem, 7.1307rem + 3.8636vw, 10.125rem);

	/* Custom pair */
	--fluid-space-s-l: clamp(1rem, 0.4886rem + 2.2727vw, 2.25rem);

	--footer-heading-min: 1.75rem; /* mobile */
	--footer-heading-max: 3.25rem; /* desktop */

	/* Fluid footer heading */
	--footer-heading: clamp(
		var(--footer-heading-min),
		3vw + 1rem,
		var(--footer-heading-max)
	);

	/* ==========================
	   CORE PROJECT SPACING
	   fixed 4px-ish scale
	========================== */

	--space-1: 0.25rem;
	--space-2: 0.5rem;
	--space-3: 1rem;
	--space-4: 1.5rem;
	--space-5: 2rem;
	--space-6: 3rem;

	--sidebar: 15rem;
	--content-max-width: 70rem;
}

body[data-theme="dark"] {
	--color-bg: hsl(0, 0%, 14%); /* was fg */
	--color-fg: hsl(0, 0%, 97%); /* was bg */

	--border-color: hsl(0, 0%, 40%);
	--border-color__dark: hsl(0, 0%, 90%);

	/* primary uses orange in dark mode */
	--primary: var(--orange);
	--primary-hover: hsl(15, 90%, 45%);
}

/* ===============================
   RESET (Piccalilli-inspired)
================================ */

*,
*::before,
*::after {
	box-sizing: border-box;
}

html {
	-moz-text-size-adjust: none;
	-webkit-text-size-adjust: none;
	text-size-adjust: none;
}

html {
	scroll-behavior: smooth;
}

body,
h1,
h2,
h3,
h4,
p,
figure,
blockquote,
dl,
dd {
	margin: 0;
}

ul[role="list"],
ol[role="list"] {
	list-style: none;
}

ul,
ol {
	margin: 0;
}

body {
	min-height: 100vh;
	line-height: 1.4;
}

h1,
h2,
h3,
h4 {
	line-height: 1;
	text-wrap: balance;
}

a:not([class]) {
	color: inherit;
	text-decoration-skip-ink: auto;
}

a {
	display: inline-block;
}

img,
picture {
	display: block;
	max-width: 100%;
}

input,
button,
textarea,
select {
	font: inherit;
}

:target {
	scroll-margin-block: 4rem;
}

main,
header {
	position: relative;
	background-color: var(--color-bg);
}

main {
	z-index: 1;
}

header {
	z-index: 2;
}
/* ===============================
   BASE LAYOUT
================================ */

body {
	position: relative;
	background: var(--color-bg);
	color: var(--color-fg);
	font-family: var(--font-family-base);
	font-size: var(--font-size-base);
	text-align: left;
	font-weight: var(--font-weight-regular);
}

h3,
thead,
tr,
th {
	font-size: var(--font-size-base);
	font-weight: var(--font-weight-regular);
}

h1,
h2 {
	font-size: var(--fluid-space-l);
	letter-spacing: -0.04em;
}

mark {
	background-color: var(--primary);
	color: var(--color-bg);
}

hr {
	border: 0;
	outline: 0;
	padding-block: 1em;
	opacity: 0.5;
}

summary {
	font-weight: var(--font-weight-regular);
	padding-block-end: 0.25em;
}
details {
	font-weight: var(--font-weight-light);
}

p {
	max-width: 68ch;
	text-wrap: pretty;
}

td p {
	max-width: 65ch;
}

.accordion__content > ul > li {
	max-width: 55ch;
}

.hr-light {
	border-top: var(--border-thin) solid var(--color-bg);
}

.hr-dark {
	border-top: var(--border-thin) solid var(--color-fg);
}

.page {
	max-width: var(--content-max-width);
	margin-inline: auto;
	padding-inline: var(--space-3);
	background-color: var(--color-bg);
	padding-block-end: calc(var(--space-6) * 2);
}

.medium {
	font-weight: var(--font-weight-medium);
}

.regular {
	font-weight: var(--font-weight-regular);
}

.light {
	font-weight: var(--font-weight-light);
}

.extra-light {
	font-weight: var(--font-weight-extra-light);
}

.thin {
	font-weight: var(--font-weight-thin);
}

.font-sm {
	font-size: var(--fluid-space-s);
}

.font-m {
	font-size: var(--fluid-space-m);
}
.font-l {
	font-size: var(--fluid-space-l);
}

.font-xl {
	font-size: var(--fluid-space-l-xl);
}
/* ===============================
   INTERACTIVE
================================ */
.theme-toggle {
	position: fixed;
	top: var(--fluid-space-s);
	right: var(--fluid-space-s);
	border: 0;
	outline: 0;
	z-index: 100; /* above everything */
	background: transparent;
	color: var(--color-fg);
	line-height: 1;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	transition: all 200ms ease;
	padding: var(--space-2);
	min-width: 2.5rem;
	min-height: 2.5rem;
}

.theme-toggle:hover {
	transform: translateX(2px);
}

.theme-toggle__icon {
	font-size: 1.5em;
	font-weight: var(--font-weight-medium);
}

/* Let it react to colour changes in dark mode automatically */

.listen-control button,
.summarise-btn {
	background: none;
	border: none;
	cursor: pointer;
	font: inherit;
	color: var(--color-fg);
	padding: 0;
	line-height: 0;
	transition: all 200ms ease;
}

.listen-control button:hover,
.summarise-btn:hover {
	transform: translateY(-2px);
	color: var(--primary);
}

.summarise-btn .icon {
	font-size: 1.5em;
	line-height: 0;
}

.summary-panel {
	--flow-space: 0.8em;
	/* padding: var(--space-3); */
}

.utility-bar {
	display: flex;
	justify-content: flex-end;
	align-items: center;
	gap: var(--space-3);
	margin-inline: calc(-1 * var(--space-3));
	padding-inline: var(--space-3);
	padding-block: 0 var(--space-3);
	border-bottom: var(--border-thin) solid var(--border-color);
}

.section-body {
	padding: var(--space-3);
}

/* Shared transition */
.fade-switch {
	opacity: 0;
	visibility: hidden;
	transition: opacity 200ms ease, visibility 0ms linear 200ms;
}

/* When active */
.fade-switch.is-visible {
	opacity: 1;
	visibility: visible;
	transition: opacity 200ms ease;
}
/* ===============================
   UTILITIES
================================ */

.site-logo {
	display: inline-flex;
	align-items: center;
	text-decoration: none;

	--logo-bg: var(--color-fg);
	--logo-fg: var(--color-bg);
}

.site-logo__svg {
	width: 100px;
	height: auto;
	display: block;
}

.site-logo .logo-bg {
	fill: var(--logo-bg);
}

.site-logo .logo-fg {
	fill: var(--logo-fg);
}

.site-logo:hover,
.site-logo:focus-visible {
	--logo-bg: var(--primary-hover);
}

a {
	color: var(--primary);
	text-underline-offset: 0.4em;
	transition: all 200ms ease;
}

summary {
	transition: all 200ms ease;
}

summary:hover {
	transform: translateX(2px);
}

a:hover {
	transform: translateY(-2px);
}

summary:hover,
a:hover,
a:focus-visible {
	color: var(--primary-hover);
	text-decoration-thickness: 0.12em;
}

/* Optional: external links (like your PDF / Figma links) */
a.external {
	text-decoration-style: dashed;
}

:focus {
	outline: none;
}

:focus-visible {
	outline: calc(var(--border-thin) * 2) solid var(--primary);
	outline-offset: var(--space-2);
}

.button {
	padding: var(--space-2) var(--space-3);
	outline: none;
	border: none;
	background: var(--primary);
	color: var(--color-bg);
	cursor: pointer;
	transition: all 200ms ease;
}

.button:active {
	transform: scale(99%);
}

.button:hover {
	background: var(--primary-hover);
	transform: translateY(-2px);
}

.button:focus {
	outline: calc(var(--border-thin) * 2) solid var(--primary);
	outline-offset: var(--space-2);
}

/* ===============================
   SKIP LINKS
================================ */

.skip-links {
	position: absolute;
	top: 0;
	left: 0;
}

.skip-links a {
	position: absolute;
	width: max-content;
	left: -9999px;
	padding: var(--space-2) var(--space-3);
	background: var(--primary);
	color: var(--color-bg);
	outline: calc(var(--border-thin) * 2) solid var(--primary);
}

.link,
.button,
.skip-links a:focus {
	left: var(--space-3);
	top: var(--space-3);
	z-index: 2;
}

/* Optional: skip-links already have their own styles, so no change needed */

.breathe {
	padding: var(--space-3);
}

.flow > * + * {
	margin-block-start: var(
		--flow-space,
		clamp(1em, 0.7188em + 1.25vw, 1.6875em)
	);
}

.numeric-alt {
	font-feature-settings: var(--font-features-alt-digits);
}

.emphasis {
	font-size: var(--fluid-space-s);
}

.asterix {
	display: flex;
	align-items: center;
	gap: calc(var(--space-1) * 2);
	font-weight: var(--font-weight-medium);
}

.case-alt {
	color: var(--orange);
	font-weight: var(--font-weight-regular);
	font-size: calc(var(--font-size-base) * 1.2);
	font-feature-settings: "case" 1;
}
/* ===============================
   HEADER STRIP
================================ */

.site-header__inner {
	max-width: var(--content-max-width);
	margin-inline: auto;
	padding-inline: var(--space-3);
	display: flex;
	gap: var(--space-2);
	justify-content: space-between;
	align-items: flex-start;
}

.site-header__logo img {
	width: 100px;
	height: auto;
}

.site-footer__logo {
	width: 200px;
	height: auto;
}

.site-header__meta:has(p) {
	line-height: 1.1;
}

/* ===============================
   SECTIONS
================================ */

.section {
	--flow-space: var(--fluid-space-3xl);
}

.self-intro {
	/* font-size: calc(var(--font-size-base) * 1.125); */
	display: flex;
	flex-wrap: wrap;
	text-wrap: pretty;
	justify-content: space-between;
	align-items: flex-start;
	color: var(--color-bg);
	opacity: 1;
}

/* Date input keeps your existing styling */
.date {
	width: 100%;
	min-width: 5rem;
	border: none;
	background: var(--color-bg);
	color: var(--color-fg);
}

/* .grade-grid {

	display: grid;
	grid-template-columns: var(--sidebar) 1fr 1fr; /* left, middle, right 
} 

/* ===============================
   TABLE SECTION
================================ */
/* Wrapper lets it scroll on small screens */
.self-assessment-wrapper {
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;
}

/* Base table */
.border-pad {
	width: 100%;
	border-collapse: collapse;
	border-spacing: 0;
	border: var(--border-thin) solid var(--border-color);
	table-layout: fixed;
	min-width: 52rem;
}

/* First column (assessment criteria) */
.col-criteria {
	width: 30%; /* tweak to taste */
}

/* All grade columns share the remaining width */
.col-grade {
	width: calc(70% / 8);
}

/* Cells */
.border-pad th,
.border-pad td {
	border-top: var(--border-thin) solid var(--border-color);
	border-left: var(--border-thin) solid var(--border-color);
	padding: var(--space-3);
	vertical-align: middle;
}

/* Keep criteria text readable */
.border-pad td:first-child {
	text-align: left;
	vertical-align: top;
	word-wrap: break-word;
}

/* Centre the grade labels and radios */
.border-pad thead th:not(:first-child),
.border-pad tbody td:not(:first-child) {
	text-align: center;
}

/* Remove double border only on the very first header cell */
.border-pad thead tr:first-child > *:first-child {
	border-left: none;
}
.border-pad thead tr:first-child th {
	border-top: none;
}

/* Header look – dark strip like your old rubric */
.border-pad thead th {
	/* background: var(--color-fg); 
	color: var(--color-bg);  */
	text-align: center;
}

/* First column: Assessment criteria */
.border-pad .criteria-header,
.border-pad td:first-child {
	text-align: left;
	vertical-align: top;
}

/* Radio cells – centre the dots */
.border-pad td input[type="radio"] {
	display: inline-block;
}

/* Optional: keep header text small for band labels */
.border-pad thead small {
	font-size: 0.75em;
}

/* ===============================
   BRIEF SECTION
================================ */

.section__embed {
	margin-block-start: var(--flow-space);
}

.brief-grid {
	border: var(--border-thin) solid var(--border-color);
}

.brief-section--no-utility-border .brief-grid__row:first-child .utility-bar {
	border-bottom: none;
}

.brief-grid__row {
	--flow-space: clamp(1rem, 0.7188rem + 1.25vw, 1.6875rem);
	display: flex;
	gap: 0;
	border-top: var(--border-thin) solid var(--border-color);
}

.brief-container:first-child,
.brief-grid__row:first-child {
	border-top: none;
}

.grade-grid p,
.brief-grid dt,
.grid-row__label {
	flex: 0 0 var(--sidebar);
	padding: var(--space-3);
	border-right: var(--border-thin) solid var(--border-color);
}

.brief-grid dd,
.grid-row__content {
	flex: 1 1 auto;
	padding: var(--space-3);
}

.center {
	display: grid;
	place-items: center;
}
.brief-container {
	container-type: inline-size;
	border: var(--border-thin) solid var(--border-color);
}

.brief-grid__row--double {
	display: grid;
	grid-template-columns: var(--sidebar) repeat(3, minmax(0, 1fr));
}

/* Make all four cells behave like table cells */
.brief-grid__row--double dt,
.brief-grid__row--double dd {
	padding: var(--space-3);
}

.brief-grid__row--double dt,
.brief-grid__row--double dd {
	border-right: var(--border-thin) solid var(--border-color);
}

/* Last cell uses the outer border from .brief-grid */
.brief-grid__row--double dd:last-of-type {
	border-right: none;
}

/* ===============================
   LO SECTION
================================ */

@counter-style lo-circled {
	system: fixed;
	symbols: "\2460""\2461""\2462""\2463""\2464""\2465""\2466""\2467""\2468""\2469";
	suffix: " ";
}

.lo-grid__desc {
	position: relative;
	display: flex;
	align-items: center;
}

.lo-grid {
	display: grid;
	grid-template-columns: var(--sidebar) 1fr 0.2fr;
	counter-reset: lo 0;
}

.lo-grid__desc::before {
	counter-increment: lo;
	content: counter(lo, lo-circled);
	font-size: var(--fluid-space-l);
	font-weight: var(--font-weight-thin);
	margin-inline-end: var(--space-2);
}

.lo-grid > * {
	padding: var(--space-3);
	border-top: var(--border-thin) solid var(--border-color);
}

.lo-grid__label,
.lo-grid__label + .lo-grid__desc,
.lo-grid__label + .lo-grid__desc + .lo-grid__weight {
	border-top: none;
}

.lo-grid__label {
	grid-row: 1 / span 4;
	border-right: var(--border-thin) solid var(--border-color);
}

.lo-grid__desc {
	border-right: var(--border-thin) solid var(--border-color);
}

.lo-grid__weight {
	margin-block-end: var(--fluid-space-xs-s);
	font-size: var(--fluid-space-m-l);
	font-weight: var(--font-weight-extra-light);
	display: grid;
	place-items: center;
}

/* ===============================
   ACCORDION
================================ */

.table__accordion::-webkit-details-marker {
	display: none;
}

/* Summary line as flex row, text left, marker right */
.table__accordion > summary {
	display: flex;
	justify-content: space-between;
	/* padding-inline-end: 10rem; */
	align-items: center;
	cursor: pointer;
	list-style: none;
	position: relative;
}

/* Right side plus/minus marker */
.table__accordion > summary::after {
	content: "↓";
	flex-shrink: 0;
	padding-inline-start: var(--space-6);
}

.table__accordion[open] > summary::after {
	content: "↑";
}

/* Base accordion block */
.accordion:first-child {
	--flow-space: -0.5em;
	margin-block-start: var(--flow-space);
}

/* Remove default triangle */
.accordion summary::-webkit-details-marker {
	display: none;
}

/* Summary line as flex row, text left, marker right */
.accordion > summary {
	display: flex;
	justify-content: space-between;
	/* padding-inline-end: 10rem; */
	align-items: center;
	cursor: pointer;
	list-style: none;
	position: relative;
}

/* Right side plus/minus marker */
.accordion > summary::after {
	font-size: calc(var(--font-size-base) * 2);
	font-weight: var(--font-weight-thin);
	content: "+";
	flex-shrink: 0;
	/* padding-inline-start: var(--space-6); */
}

.accordion[open] > summary::after {
	content: "–";
}

/* Inner list spacing */
footer ul,
.accordion__content ul {
	margin: 0;
	padding-inline-start: var(--space-1);
	margin-block-start: -0.5em;
}

footer li,
.accordion__content li {
	margin-bottom: var(--space-1);
	padding-left: var(--space-3);
	list-style: none;
	position: relative;
}

/* Custom marker using Inter's figure dash (U+2012) */
footer li::before,
.accordion__content li::before {
	content: "\2012"; /* figure dash */
	position: absolute;
	left: calc(-1 * var(--space-1));
}

/* Custom checkmark markers for summary-section list */
.grid-row__content ul[role="list"] {
	list-style: none;
	padding-inline-start: 0;
	margin-block: 0;
}

.grid-row__content ul[role="list"] li {
	position: relative;
	margin-bottom: var(--space-1);
}

/* .grid-row__content ul[role="list"] li::before {
	content: "\2713"; 
	position: absolute;
	left: 0;
	font-feature-settings: var(--font-features-alt-digits);
} */

.accordion > summary:focus {
	outline: none;
}

/* Keyboard focus */
.accordion > summary:focus-visible {
	outline: calc(var(--border-thin) * 2) solid var(--primary);
	outline-offset: var(--space-1);
}

/* ===============================
   RUBRIC
================================ */

/* One block per Learning Outcome */

.pt-xxl {
	padding-block-start: var(--fluid-space-2xl-3xl);
}
.mt-6 {
	margin-block-start: var(--space-6);
}

.mt-3 {
	margin-block-start: var(--fluid-space-s-m);
}

.pt-6 {
	padding-block-start: var(--fluid-space-l-xl);
}

.rubric {
	font-size: var(--fluid-space-s-m);
	font-weight: var(--font-weight-light);
}

.rubric-lo-table,
.rubric-grade-table {
	width: 100%;
	border-collapse: collapse;
	border-spacing: 0;
	border: var(--border-thin) solid var(--border-color);
}

.rubric-grade-table {
	border-top: none;
}

/* Keep grade codes (A, B+ / B, B- / C+, etc.) on one line */
.rubric-grade-table th:first-child,
.rubric-grade-table td:first-child {
	white-space: nowrap;
	width: var(--space-6);
}

#rubric {
	counter-reset: rubric-lo;
}

/* Cells */

.rubric-lo-table th,
.rubric-lo-table td,
.rubric-grade-table th,
.rubric-grade-table td {
	padding: var(--space-3);
	border-top: var(--border-thin) solid var(--border-color);
	/* vertical-align: top; */
}

.rubric-lo-table th + th,
.rubric-lo-table td + td,
.rubric-grade-table th + th,
.rubric-grade-table td + td {
	border-left: var(--border-thin) solid var(--border-color);
}

.rubric-lo-table th:last-child,
.rubric-lo-table td:last-child {
	white-space: nowrap;
	width: var(--space-6);
}

/* Remove double border at very top */
.rubric-lo-table thead th,
.rubric-grade-table thead th {
	border-top: none;
}

/* Make header row feel like a header without changing font size/weight */
.rubric-lo-table thead th {
	white-space: normal;
}
.rubric-grade-table thead th {
	white-space: nowrap;
}

/* Number the LO blocks in the rubric */
.rubric-section {
	counter-reset: rubric-lo;
}

.rubric-lo-title {
	display: flex;
	align-items: center;
}

.rubric-lo-title::after {
	counter-increment: rubric-lo;
	content: " " counter(rubric-lo, lo-circled);
	margin-inline-start: var(--fluid-space-s);
	font-weight: var(--font-weight-thin);
	font-size: var(--fluid-space-l);
	font-feature-settings: var(--font-features-alt-digits);
}

/* ===============================
   Example feedback section
================================ */

.feedback-grid {
	display: grid;
	gap: var(--space-4);
}

.feedback-field {
	display: flex;
	flex-direction: column;
	gap: var(--space-2);
}

.visually-hidden {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	white-space: nowrap;
	border: 0;
}

.example-feedback__figure {
	margin: 0;
}

.example-thumbnail {
	display: block;
	width: 100%; /* fill the container */
	height: auto; /* keep aspect ratio */
	border: var(--border-thin) solid var(--border-color);
}

/* Simple hint text under some labels */

.field-hint {
	margin: 0;
	/* margin-block-start: var(--space-1); */
	font-size: 0.8em;
}

/* Inputs and textareas inherit your typography and colours */

.submission__head > * {
	flex-grow: 1;
	flex-basis: calc((var(--sidebar) - 100%) * 999);
}

.submission__head > :nth-last-child(n + 5),
.submission__head > :nth-last-child(n + 5) ~ * {
	flex-basis: 100%;
}
.submission-input,
.submission-textarea {
	width: 100%;
	border: var(--border-thin) solid var(--color-fg);
	padding: var(--space-2);
	background: transparent;
}

/* Give textareas a bit of height */
.feedback-field,
.submission-textarea {
	min-height: var(--space-1);
	resize: vertical;
}

/* Signature line under Declaration */

.submission-signature-line {
	display: inline-block;
	min-width: 80%;
	margin-left: var(--space-2);
	border-bottom: var(--border-thin) solid var(--border-color__dark);
}

.submission-input:invalid:focus-visible {
	border: calc(var(--border-thin) * 2) solid var(--orange);
}

/* ===============================
 Submission checklist
================================ */

.submission-checklist {
	list-style: none;
	margin: 0;
	padding: 0;
	display: grid;
	gap: var(--space-2); /* consistent with your spacing scale */
}

.submission-checklist__item {
	margin: 0;
	padding: 0;
}

.submission-checklist__label {
	display: inline-flex;
	align-items: center;
	gap: var(--space-2);
	cursor: pointer;
	transition: all 200ms ease;
}

.submission-checklist__label:hover {
	transform: translateX(2px);
}

/* Hide the native checkbox but keep it accessible */
.submission-checklist__checkbox {
	position: absolute;
	opacity: 0;
	pointer-events: none;
}

/* Custom checkbox symbol (Inter □ / ✓ ) */
.submission-checklist__text::before {
	content: "\25A1";
	font-family: var(--font-family-base);
	/* font-size: 1em; */
	/* line-height: 1; */
	width: 1.25em;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	color: var(--color-fg);
	border-radius: 0;
}

/* Checked state → ✓ in your primary colour */
.submission-checklist__checkbox:checked + .submission-checklist__text::before {
	content: "✓";
	color: var(--primary);
}

/* Focus state uses your token-based outline */
.submission-checklist__checkbox:focus-visible
	+ .submission-checklist__text::before {
	outline: calc(var(--border-thin) * 2) solid var(--primary);
	outline-offset: var(--space-1);
}
/* ===============================
   FOOTER
================================ */

.footer-stack {
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

footer {
	height: 100vh;
	background-color: var(--color-fg);
	color: var(--color-bg);
	position: sticky;
	bottom: 0;
	left: 0;
	z-index: 0;
	padding: var(--fluid-space-m-l);
}

.footer-body {
	--flow-space: 2em;
}

footer a {
	color: var(--orange);
}

footer a:hover {
	color: var(--color-bg);
}

.footer-heading {
	font-size: var(--footer-heading);
	font-weight: var(--font-weight-medium);
	line-height: 1.05;
	max-width: 38ch; /* keeps it refined and readable */
	text-align: left; /* as you requested */
	margin-bottom: var(--space-l);
}

.stack {
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	gap: var(--fluid-space-m);
}

.switcher {
	display: flex;
	flex-wrap: wrap;
	gap: var(--space-1);
}

.switcher > * {
	flex-grow: 1;
	flex-basis: calc((34rem - 100%) * 999);
}

.switcher > :nth-last-child(n + 3),
.switcher > :nth-last-child(n + 3) ~ * {
	flex-basis: 100%;
}

/* ===============================
   RESPONSIVE
================================ */

@media print {
	.submission-print {
		display: none;
	}
}

@media print {
	/* Hide whole page by default */
	body * {
		visibility: hidden !important;
	}

	/* Make only the checklist visible */
	.submission-checklist,
	.submission-checklist * {
		visibility: visible !important;
	}

	/* Ensure the checklist prints in the right place */
	.submission-checklist {
		position: absolute;
		top: 0;
		left: 0;
		padding: var(--space-m);
		width: 100%;
		background: white; /* optional for clarity */
	}
}

/* at this width and smaller: stack */
@media (max-width: 34rem) {
	.site-header__inner {
		display: flex;
		flex-direction: column;
	}
	.lo-grid,
	.brief-grid__row {
		flex-direction: column;
		gap: 0;
		border-top: var(--border-thick) solid var(--border-color__dark);
	}
	.brief-grid dt {
		flex: auto;
		border-right: none;
	}
	.brief-grid__row:first-child {
		border-top: var(--border-thick) solid var(--border-color__dark);
	}

	.grid-row__content,
	.brief-grid dd {
		padding-block-start: 0;
		padding-block-end: var(--space-5); /* this is the extra space */
	}
}

@media (max-width: 40rem) {
	.actions-bar {
		flex-direction: column;
		align-items: flex-start;
		gap: var(--fluid-space-2xs-xs);
	}
	/* .section__embed {
		margin-block-start: var(--space-1);
	} */
	/* Keep table semantics but render rows as blocks */
	.rubric-lo-table,
	.rubric-lo-table thead,
	.rubric-lo-table tbody,
	.rubric-lo-table tr,
	.rubric-lo-table th,
	.rubric-lo-table td {
		display: block;
		width: 100%;
	}
	/* Remove column borders, we are stacked now */
	.rubric-lo-table td {
		border-top: none;
		border-left: none;
		padding-inline: 0;
		padding-block: var(--space-2);
	}

	/* Add the column label above each value */
	.rubric-lo-table td::before {
		content: attr(data-label);
		display: block;
		/* margin-bottom: var(--space-1); */
		font-weight: var(
			--font-weight-medium
		); /* still same size, just a touch heavier */
	}
	.rubric-lo-table th + th,
	.rubric-lo-table td + td {
		border-left: none;
	}

	.rubric-lo-table thead {
		position: absolute;
		width: 1px;
		height: 1px;
		/* margin: -1px; */
		padding: 0;
		overflow: hidden;
		border: 0;
		clip: rect(0 0 0 0);
		clip-path: inset(50%);
		white-space: nowrap;
	}

	.rubric-lo-table tbody tr {
		padding: var(--space-3);
	}

	.brief-grid__row--double {
		grid-template-columns: repeat(2, 1fr);
		gap: 0;
	}

	.brief-grid__row--double dt,
	.brief-grid__row--double dd {
		border-right: none;
	}
	.brief-grid__row--double dt,
	.brief-grid__row--double dd {
		border-left: var(--border-thin) solid var(--border-color);
		border-bottom: var(--border-thin) solid var(--border-color);
	}
}

@container (max-width: 40rem) {
	.brief-grid__row {
		flex-direction: column;
		gap: 0;
	}

	.grid-row__label {
		flex: auto;
		border-right: none;
		/* border-bottom: var(--border-thin) solid var(--border-color); */
	}
	.lo-grid > *:not(.lo-grid__label) {
		padding-block: var(--space-2);
	}
	.lo-grid > :nth-child(odd):not(.lo-grid__label) {
		margin-inline-start: var(--space-5);
	}

	.lo-grid {
		grid-template-columns: 1fr;
	}

	.lo-grid__label {
		grid-row: auto;
		border-right: none;
	}
	.lo-grid__desc {
		border-right: none;
	}
	.lo-grid__weight {
		border-bottom: none;
		border-top: none;
		margin-block-end: var(--fluid-space-xs-s);
		font-size: var(--fluid-space-l);
		font-weight: var(--font-weight-extra-light);
		display: flex;
		justify-content: flex-start;
	}
	.stack {
		display: block;
	}
}
